<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Events</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(to bottom, #e8f0f8 0%, #f5f9fc 100%);
            min-height: 100vh;
        }

        .navbar {
            background-color: #1a1f2e;
            color: white;
            padding: 12px 40px;
            display: flex;
            align-items: center;
            justify-content: space-between;
            position: sticky;
            top: 0;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
        }

        .logo {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 18px;
            font-weight: 600;
            cursor: pointer;
        }

        .logo svg {
            width: 24px;
            height: 24px;
        }

        .nav-links {
            display: flex;
            gap: 0;
            list-style: none;
        }

        .nav-item {
            position: relative;
        }

        .nav-link {
            color: #b8c5d6;
            text-decoration: none;
            font-size: 14px;
            padding: 20px 20px;
            display: block;
            transition: all 0.3s;
            cursor: pointer;
        }

        .nav-link:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.05);
        }

        .nav-link.active {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .nav-right {
            display: flex;
            align-items: center;
            gap: 20px;
        }

        .login-btn {
            color: #b8c5d6;
            text-decoration: none;
            font-size: 14px;
            cursor: pointer;
            transition: color 0.3s;
            padding: 8px 16px;
            border-radius: 6px;
            display: none;
        }

        .login-btn:hover {
            color: white;
            background-color: rgba(255, 255, 255, 0.1);
        }

        .user-icon {
            width: 32px;
            height: 32px;
            background-color: #4a5568;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .user-icon:hover {
            background-color: #5a6578;
        }

        .page-container {
            max-width: 1200px;
            margin: 40px auto;
            padding: 0 20px 40px;
        }

        .page-header {
            margin-bottom: 24px;
        }

        .page-title {
            font-size: 32px;
            font-weight: 700;
            color: #1a1f2e;
            margin-bottom: 8px;
        }

        .page-subtitle {
            color: #6b7280;
            font-size: 14px;
        }

        .page-meta {
            margin-top: 8px;
            font-size: 12px;
            color: #6b7280;
        }

        .tabs {
            display: inline-flex;
            background-color: #e5edff;
            padding: 4px;
            border-radius: 999px;
            margin: 24px 0 16px;
        }

        .tab {
            padding: 6px 16px;
            font-size: 13px;
            border-radius: 999px;
            cursor: pointer;
            border: none;
            background: transparent;
            color: #4b5563;
            transition: all 0.2s;
        }

        .tab.active {
            background-color: #4c8bf5;
            color: white;
            box-shadow: 0 2px 6px rgba(76, 139, 245, 0.4);
        }

        .filters-bar {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 10px;
            margin-bottom: 16px;
        }

        .search-input {
            width: 100%;
            padding: 10px 12px;
            border: 1px solid #d5dde6;
            border-radius: 8px;
            font-size: 13px;
            background-color: white;
        }

        .search-input:focus {
            outline: none;
            border-color: #4c8bf5;
            box-shadow: 0 0 0 3px rgba(76, 139, 245, 0.1);
        }

        .events-grid {
            display: grid;
            grid-template-columns: repeat(3, minmax(0, 1fr));
            gap: 20px;
        }

        .event-card {
            background-color: #f8fafc;
            border-radius: 10px;
            overflow: hidden;
            cursor: pointer;
            transition: all 0.3s;
        }

        .event-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.1);
        }

        .event-image {
            width: 100%;
            height: 120px;
            background: linear-gradient(135deg, #1a1f2e 0%, #2d3748 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
            font-weight: 500;
            position: relative;
        }

        .event-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background-color: #4c8bf5;
            color: white;
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 600;
        }

        .event-category-badge {
            position: absolute;
            bottom: 10px;
            left: 10px;
            padding: 4px 10px;
            border-radius: 999px;
            font-size: 11px;
            font-weight: 600;
            background-color: rgba(255, 255, 255, 0.14);
            color: #e5edff;
            border: 1px solid rgba(255, 255, 255, 0.3);
        }

        .event-info {
            padding: 15px;
        }

        .event-header-row {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: 8px;
        }

        .event-title {
            font-weight: 600;
            color: #1a1f2e;
            margin-bottom: 4px;
            font-size: 14px;
        }

        .event-organizer {
            font-size: 12px;
            color: #6b7280;
        }

        .tag {
            padding: 4px 10px;
            border-radius: 12px;
            font-size: 11px;
            font-weight: 500;
        }

        .tag-mode {
            background-color: #d1fae5;
            color: #065f46;
        }

        .tag-difficulty {
            background-color: #dbeafe;
            color: #1e40af;
        }

        .tag-required-skill {
            background-color: #e0f2fe;
            color: #075985;
        }

        .tag-prize {
            background-color: #fef3c7;
            color: #92400e;
        }

        .event-meta {
            display: flex;
            align-items: center;
            gap: 12px;
            color: #6b7280;
            font-size: 12px;
            margin: 8px 0;
            flex-wrap: wrap;
        }

        .event-footer-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 8px;
            gap: 8px;
            flex-wrap: wrap;
        }

        .event-deadline-text {
            font-size: 11px;
            color: #6b7280;
        }

        .event-status-badge {
            font-size: 11px;
            padding: 3px 8px;
            border-radius: 999px;
            background-color: #ecfdf5;
            color: #166534;
            font-weight: 500;
        }

        .event-actions {
            display: flex;
            gap: 6px;
            flex-wrap: wrap;
            margin-top: 10px;
        }

        .btn {
            padding: 8px 14px;
            border-radius: 8px;
            border: none;
            font-size: 12px;
            font-weight: 500;
            cursor: pointer;
            display: inline-flex;
            align-items: center;
            gap: 6px;
            transition: all 0.2s;
        }

        .btn-primary {
            background-color: #4c8bf5;
            color: white;
        }

        .btn-primary:hover {
            background-color: #3b7ae0;
        }

        .btn-secondary {
            background-color: white;
            color: #4c8bf5;
            border: 1px solid #d5dde6;
        }

        .btn-secondary:hover {
            background-color: #f8fafc;
        }

        .no-results {
            text-align: center;
            padding: 40px;
            color: #6b7280;
            grid-column: 1 / -1;
        }

        .loading {
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 40px;
        }

        .spinner {
            width: 40px;
            height: 40px;
            border: 4px solid #f3f4f6;
            border-top-color: #4c8bf5;
            border-radius: 50%;
            animation: spin 0.8s linear infinite;
        }

        @keyframes spin {
            to {
                transform: rotate(360deg);
            }
        }

        .toast {
            position: fixed;
            bottom: 30px;
            right: 30px;
            background-color: #1a1f2e;
            color: white;
            padding: 15px 25px;
            border-radius: 8px;
            box-shadow: 0 4px 12px rgba(0, 0, 0, 0.2);
            z-index: 3000;
            display: none;
            animation: slideUp 0.3s ease-out forwards;
        }

        @keyframes slideUp {
            from {
                opacity: 0;
                transform: translateY(20px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .toast.active {
            display: block;
        }

        .toast.success {
            background-color: #10b981;
        }

        .toast.error {
            background-color: #ef4444;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 2000;
            justify-content: center;
            align-items: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background-color: white;
            padding: 24px;
            border-radius: 12px;
            max-width: 600px;
            width: 90%;
            max-height: 80vh;
            overflow-y: auto;
            position: relative;
        }

        .modal-close {
            position: absolute;
            top: 10px;
            right: 10px;
            cursor: pointer;
            font-size: 22px;
            color: #6b7280;
        }

        @media (max-width: 1024px) {
            .events-grid {
                grid-template-columns: repeat(2, minmax(0, 1fr));
            }
        }

        @media (max-width: 768px) {
            .events-grid {
                grid-template-columns: 1fr;
            }

            .filters-bar {
                grid-template-columns: 1fr 1fr;
            }
        }
    </style>
</head>

<body>
    <!-- API Configuration -->
    <script src="api-config.js"></script>

    <nav class="navbar">
        <div class="logo" onclick="window.location.href='index.html'">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <path d="M13 2L3 14h9l-1 8 10-12h-9l1-8z" />
            </svg>
            Ascendify
        </div>
        <ul class="nav-links">
            <li class="nav-item">
                <a class="nav-link" href="index.html">Home</a>
            </li>
            <li class="nav-item">
                <a class="nav-link active" href="events.html">Events</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index.html#opportunities">Opportunities</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index.html#skill-exchange">Skill Exchange</a>
            </li>
            <li class="nav-item">
                <a class="nav-link" href="index.html#community">Community</a>
            </li>
        </ul>
        <div class="nav-right">
            <a class="login-btn">Login</a>
        </div>
    </nav>

    <div class="page-container">
        <div class="page-header">
            <h1 class="page-title">Explore Events</h1>
            <div class="page-subtitle">Discover hackathons, workshops, competitions and more tailored to your interests.
            </div>
            <div class="page-meta"><span id="eventCount">0</span> events available</div>
        </div>

        <div class="tabs">
            <button class="tab active" id="tab-all" onclick="switchTab('all')">All</button>
            <button class="tab" id="tab-workshops" onclick="switchTab('workshops')">Workshops</button>
            <button class="tab" id="tab-internships" onclick="switchTab('internships')">Internships</button>
            <button class="tab" id="tab-skills" onclick="switchTab('skills')">Skills</button>
            <button class="tab" id="tab-my" onclick="switchTab('my')">My Events</button>
        </div>

        <div class="filters-bar">
            <select id="filterCategory" class="search-input">
                <option value="all">All Categories</option>
                <option value="hackathons">Hackathons</option>
                <option value="workshops">Workshops</option>
                <option value="competitions">Competitions</option>
                <option value="webinars">Webinars</option>
                <option value="college-events">College Events</option>
            </select>
            <select id="filterMode" class="search-input">
                <option value="all">Any Mode</option>
                <option value="online">Online</option>
                <option value="offline">Offline</option>
                <option value="hybrid">Hybrid</option>
            </select>
            <select id="filterDomain" class="search-input">
                <option value="all">Any Domain</option>
                <option value="ai-ml">AI / ML</option>
                <option value="web-dev">Web Development</option>
                <option value="cybersecurity">Cybersecurity</option>
                <option value="data-science">Data Science</option>
                <option value="ui-ux">UI / UX</option>
            </select>
            <select id="filterDifficulty" class="search-input">
                <option value="all">Any Level</option>
                <option value="beginner">Beginner</option>
                <option value="intermediate">Intermediate</option>
                <option value="advanced">Advanced</option>
            </select>
            <select id="filterDeadline" class="search-input">
                <option value="">Any Deadline</option>
                <option value="this_week">This Week</option>
                <option value="this_month">This Month</option>
                <option value="upcoming">Upcoming</option>
            </select>
            <input id="filterSearch" type="text" class="search-input" placeholder="Search by title or organizer">
        </div>

        <div id="loadingSpinner" class="loading" style="display: none;">
            <div class="spinner"></div>
        </div>
        <div id="eventsContainer" class="events-grid"></div>
    </div>

    <div class="toast" id="toast"></div>

    <!-- Event Details Modal -->
    <div class="modal" id="eventDetailsModal" onclick="closeEventModal(event)">
        <div class="modal-content" onclick="event.stopPropagation()">
            <span class="modal-close" onclick="closeEventModal()">&times;</span>
            <h2 id="modalTitle" style="margin-bottom: 20px; color: #333;">Event Title</h2>

            <div style="display: grid; gap: 15px;">
                <div>
                    <strong style="color: #667eea;">Date:</strong>
                    <p id="modalDate" style="margin-top: 5px;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Location:</strong>
                    <p id="modalLocation" style="margin-top: 5px;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Organizer:</strong>
                    <p id="modalOrganizer" style="margin-top: 5px;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Description:</strong>
                    <p id="modalDescription" style="margin-top: 5px; line-height: 1.6;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Prize:</strong>
                    <p id="modalPrize" style="margin-top: 5px;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Required Skills:</strong>
                    <p id="modalSkills" style="margin-top: 5px;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Registrations:</strong>
                    <p id="modalRegistrations" style="margin-top: 5px;">-</p>
                </div>

                <div>
                    <strong style="color: #667eea;">Rules:</strong>
                    <ul id="modalRules" style="margin-top: 5px; margin-left: 20px;">
                        <li>-</li>
                    </ul>
                </div>

                <div>
                    <strong style="color: #667eea;">Timeline:</strong>
                    <ul id="modalTimeline" style="margin-top: 5px; margin-left: 20px;">
                        <li>-</li>
                    </ul>
                </div>
            </div>

            <div style="margin-top: 30px; display: flex; gap: 15px;">
                <button onclick="registerEvent()"
                    style="padding: 12px 30px; background: #667eea; color: white; border: none; border-radius: 8px; cursor: pointer; font-weight: 600;">Register
                    Now</button>
                <button onclick="findTeam()"
                    style="padding: 12px 30px; background: white; color: #667eea; border: 2px solid #667eea; border-radius: 8px; cursor: pointer; font-weight: 600;">Find
                    Team</button>
            </div>
        </div>
    </div>

    <div class="modal" id="teamModal">
        <div class="modal-content">
            <span class="modal-close" onclick="closeTeamModal()">&times;</span>
            <h3 style="margin-bottom: 10px;">Find a Team</h3>
            <div id="teamModalBody"></div>
        </div>
    </div>

    <script src="api-config.js"></script>
    <script>
        let allEvents = [];
        let currentTab = 'all';

        // Wait for page to fully load
        window.addEventListener('load', function () {
            console.log('‚úì Page loaded');
            initializeApp();
        });

        async function initializeApp() {
            console.log('=== INITIALIZING APP ===');
            await loadAllEvents();
            attachFilterListeners();
        }

        async function loadAllEvents() {
            const spinner = document.getElementById('loadingSpinner');
            const container = document.getElementById('eventsContainer');

            try {
                if (spinner) spinner.style.display = 'flex';
                console.log('Loading from:', API_BASE_URL + '/events');

                const response = await fetch(`${API_BASE_URL}/events`);
                console.log('Response:', response.status);

                if (!response.ok) throw new Error(`HTTP ${response.status}`);

                const data = await response.json();
                allEvents = Array.isArray(data) ? data : [];
                console.log('‚úì Loaded', allEvents.length, 'events');

                renderEvents(allEvents);
                updateCount();

            } catch (error) {
                console.error('Error:', error);

                // Fallback to local data
                console.log('Falling back to local data...');
                loadLocalData();

                if (container) {
                    // Toast notification for offline mode
                    showToast('Server offline. Showing demo events.', 'error');
                }
            } finally {
                if (spinner) spinner.style.display = 'none';
            }
        }

        function loadLocalData() {
            // Use the same data structure as the API
            allEvents = [
                {
                    id: 1,
                    title: 'Future Hack 2026',
                    description: 'Join us for an exciting AI/ML hackathon!',
                    date: 'Jan 30 - Feb 2',
                    type: 'Hackathon',
                    location: 'Online',
                    registrations: 245,
                    maxParticipants: 500,
                    tags: ['creative', 'coding', 'ai'],
                    category: 'hackathons',
                    organizer: 'Tech Institute',
                    prize: '$10,000',
                    skills: ['Python', 'Machine Learning'],
                    // NEW fields for upgraded events system
                    rules: [
                        'Teams of up to 4 members',
                        'All code must be written during the event'
                    ],
                    timeline: [
                        'Jan 15, 2026 ‚Äì Registrations open',
                        'Jan 30 - Feb 2, 2026 ‚Äì Main hackathon'
                    ],
                    mode: 'online',
                    domain: 'ai-ml',
                    difficulty: 'intermediate',
                    eventDate: '2026-01-30T09:00:00Z',
                    registrationDeadline: '2026-01-28T23:59:59Z',
                    requiredSkills: ['Python', 'Machine Learning']
                },
                {
                    id: 2,
                    title: 'Web Dev Bootcamp',
                    description: 'Intensive 3-day bootcamp covering modern web development.',
                    date: 'Feb 5 - Feb 7',
                    type: 'Workshop',
                    category: 'workshops',
                    mode: 'offline',
                    domain: 'web-dev',
                    difficulty: 'beginner',
                    registrations: 180,
                    maxParticipants: 200,
                    location: 'New York, NY',
                    organizer: 'Code Academy',
                    prize: 'Certificate'
                },
                {
                    id: 3,
                    title: 'Design Sprint 2026',
                    description: 'Collaborative design sprint focusing on UI/UX principles.',
                    date: 'Feb 10 - Feb 12',
                    type: 'Competition',
                    category: 'competitions',
                    mode: 'hybrid',
                    domain: 'ui-ux',
                    difficulty: 'intermediate',
                    registrations: 95,
                    maxParticipants: 150,
                    location: 'San Francisco, CA',
                    organizer: 'Design Studio',
                    prize: '$5,000'
                },
                {
                    id: 4,
                    title: 'Startup Weekend',
                    description: 'Build a startup from scratch in 54 hours.',
                    date: 'Feb 15 - Feb 17',
                    type: 'Competition',
                    category: 'college-events',
                    mode: 'offline',
                    domain: 'business',
                    difficulty: 'advanced',
                    registrations: 320,
                    maxParticipants: 400,
                    location: 'Boston, MA',
                    organizer: 'Startup Hub',
                    prize: '$15,000'
                },
                {
                    id: 5,
                    title: 'Cloud Computing Workshop',
                    description: 'Hands-on workshop on AWS, Azure, and Google Cloud Platform.',
                    date: 'Feb 20 - Feb 22',
                    type: 'Workshop',
                    category: 'webinars',
                    mode: 'online',
                    domain: 'data-science',
                    difficulty: 'intermediate',
                    registrations: 410,
                    maxParticipants: 600,
                    location: 'Online',
                    organizer: 'Cloud Academy',
                    prize: 'AWS Certification Voucher'
                }
            ];

            console.log('‚úì Loaded', allEvents.length, 'local events');
            renderEvents(allEvents);
            updateCount();
        }

        function renderEvents(events) {
            const container = document.getElementById('eventsContainer');
            if (!container) return;

            container.innerHTML = '';
            console.log('Rendering', events.length, 'events');

            if (!events || events.length === 0) {
                container.innerHTML = '<div class="no-results">No events found</div>';
                return;
            }

            events.forEach(event => {
                const card = document.createElement('div');
                card.className = 'event-card';
                card.style.cursor = 'pointer';
                card.onclick = () => openEventModal(event);

                const imageSection = document.createElement('div');
                imageSection.className = 'event-image';
                imageSection.innerHTML = `
                    <span>${escapeHtml(event.category || 'Event')}</span>
                    <span class="event-badge">${escapeHtml(event.difficulty || 'N/A')}</span>
                    <span class="event-category-badge">${escapeHtml(event.mode || 'Online')}</span>
                `;

                const infoSection = document.createElement('div');
                infoSection.className = 'event-info';
                const desc = (event.description || 'No description').substring(0, 80);
                infoSection.innerHTML = `
                    <div class="event-title">${escapeHtml(event.title || 'Untitled')}</div>
                    <div class="event-organizer">${escapeHtml(event.organizer || 'TBA')}</div>
                    <div class="event-description">${escapeHtml(desc)}...</div>
                    <div class="event-meta">üìç ${escapeHtml(event.location || 'Online')}</div>
                `;

                card.appendChild(imageSection);
                card.appendChild(infoSection);
                container.appendChild(card);
            });
        }

        function applyFilters() {
            let filtered = [...allEvents];

            const category = document.getElementById('filterCategory')?.value || 'all';
            const mode = document.getElementById('filterMode')?.value || 'all';
            const domain = document.getElementById('filterDomain')?.value || 'all';
            const level = document.getElementById('filterDifficulty')?.value || 'all';
            const search = (document.getElementById('filterSearch')?.value || '').toLowerCase();

            if (category !== 'all') {
                filtered = filtered.filter(e => (e.category || '').toLowerCase() === category.toLowerCase());
            }
            if (mode !== 'all') {
                filtered = filtered.filter(e => (e.mode || '').toLowerCase() === mode.toLowerCase());
            }
            if (domain !== 'all') {
                filtered = filtered.filter(e => (e.domain || '').toLowerCase() === domain.toLowerCase());
            }
            if (level !== 'all') {
                filtered = filtered.filter(e => (e.difficulty || '').toLowerCase() === level.toLowerCase());
            }
            if (search) {
                filtered = filtered.filter(e =>
                    (e.title && e.title.toLowerCase().includes(search)) ||
                    (e.organizer && e.organizer.toLowerCase().includes(search))
                );
            }

            if (currentTab === 'workshops') {
                filtered = filtered.filter(e => (e.category || '').toLowerCase() === 'workshops');
            } else if (currentTab === 'internships') {
                filtered = filtered.filter(e => (e.category || '').toLowerCase() === 'internships');
            } else if (currentTab === 'skills') {
                filtered = filtered.filter(e => (e.category || '').toLowerCase() === 'skills');
            }

            console.log('Filtered to', filtered.length, 'events');
            renderEvents(filtered);
            updateCount(filtered.length);
        }

        function switchTab(tabName) {
            console.log('Switching to:', tabName);
            currentTab = tabName;

            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.getElementById(`tab-${tabName}`)?.classList.add('active');

            applyFilters();
        }

        function attachFilterListeners() {
            const filters = ['filterCategory', 'filterMode', 'filterDomain', 'filterDifficulty', 'filterSearch'];
            filters.forEach(id => {
                const element = document.getElementById(id);
                if (element) {
                    element.addEventListener('change', applyFilters);
                    element.addEventListener('input', applyFilters);
                }
            });
        }

        function updateCount(count = allEvents.length) {
            const element = document.getElementById('eventCount');
            if (element) element.textContent = count;
        }

        function showToast(message, type = '') {
            const toast = document.getElementById('toast');
            if (toast) {
                toast.textContent = message;
                toast.className = 'toast active ' + type;
                setTimeout(() => {
                    toast.classList.remove('active');
                }, 3000);
            }
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // Event Modal Functions
        function openEventModal(event) {
            console.log('Opening modal for:', event.title);

            document.getElementById('modalTitle').textContent = event.title || 'Event';
            document.getElementById('modalDate').textContent = event.date || event.eventDate || 'TBA';
            document.getElementById('modalLocation').textContent = event.location || 'Online';
            document.getElementById('modalOrganizer').textContent = event.organizer || 'TBA';
            document.getElementById('modalDescription').textContent = event.description || 'No description available';
            document.getElementById('modalPrize').textContent = event.prize || 'No prize information';
            document.getElementById('modalRegistrations').textContent =
                (event.registrations || 0) + ' / ' + (event.maxParticipants || '‚àû') + ' registered';

            // Skills
            const skillsList = event.requiredSkills || event.skills || [];
            document.getElementById('modalSkills').textContent =
                skillsList.length > 0 ? skillsList.join(', ') : 'No specific skills required';

            // Rules
            const rulesList = event.rules || [];
            const rulesHtml = rulesList.length > 0
                ? rulesList.map(r => `<li>${escapeHtml(r)}</li>`).join('')
                : '<li>No specific rules provided</li>';
            document.getElementById('modalRules').innerHTML = rulesHtml;

            // Timeline
            const timelineList = event.timeline || [];
            const timelineHtml = timelineList.length > 0
                ? timelineList.map(t => `<li>${escapeHtml(t)}</li>`).join('')
                : '<li>No timeline information</li>';
            document.getElementById('modalTimeline').innerHTML = timelineHtml;

            // Show modal
            const modal = document.getElementById('eventDetailsModal');
            if (modal) {
                modal.style.display = 'flex';
                document.body.style.overflow = 'hidden';
            }
        }

        function closeEventModal(e) {
            // Allow closing by clicking background or close button
            if (e && e.target.id !== 'eventDetailsModal') return;

            const modal = document.getElementById('eventDetailsModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }

        function registerEvent() {
            alert('Registration feature coming soon!');
        }

        function findTeam() {
            alert('Team finding feature coming soon!');
        }

        function closeTeamModal() {
            const modal = document.getElementById('teamModal');
            if (modal) {
                modal.style.display = 'none';
                document.body.style.overflow = 'auto';
            }
        }
    </script>
</body>

</html>